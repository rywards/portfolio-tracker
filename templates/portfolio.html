<!DOCTYPE html>

<!--
  Ryan Edwards
  Appended from index.html by Ben Adelson
-->
<html lang="en">
<head>
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <title>Home</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
  <h1>ProfStock</h2>
</header>
<div id="root"></div>
<div id="subInfo"></div>

<script type="text/babel">
  
  class SubLinks extends React.Component {
    render() {
      return (
        <h2>
          <ul>
            <li><a className="active" href="{{ url_for('home') }}">Home</a></li>
            <li><a href="{{ url_for('portfolio') }}">Portfolio</a></li>
            <li><a href="{{ url_for('watchlist') }}">Watchlist</a></li>
            <li style={ {float:"right"}}>
              <form action="/stockinfo.html" method="post">
                <input type="text" name="ticker" placeholder="Enter ticker"/>
                <input type="submit" value="Search"/>
              </form>
            </li>
            {% if session %}
            <li style={ {float:"right"}}><a href="{{url_for('logout')}}">Logout</a></li>
            {% else %}
            <li style={ {float:"right"}}><a href="{{url_for('login')}}">Login</a></li>
            {% endif %}
          </ul>
        </h2>);
    }
  }

  function portfolio() {
    const items = [
    {
      id: 1,
      name: 'APPLE INC',
      marketCap:'$2.599 T',
      price: '$159.30',
      ticket: 'AAPL'
    }]


    const itemRows = [];
    for (let item of items) {
      const row = (
        <tr key={item.id}>
          <td key={1}>{item.id}</td>
          <td key={2}>{item.name}</td>
          <td key={3}>{item.marketCap}</td>
          <td key={4}>{item.price}</td>
          <td key={5}>{item.ticket}</td>
        </tr>
      );
      itemRows.push(row);
    }
    return (
      <table className = "home2" align="center">
        <thead>
          <tr>
            <th colSpan = '5'>Top 10 Stocks by Market Cap</th>
          </tr>
          <tr>
            <th>#</th>
              <th>Name</th>
              <th>Market Cap</th>
              <th>Price</th>
              <th>ticket</th>
          </tr>
        </thead>
        <tbody>
          {itemRows}
        </tbody>
      </table>
    );
  }

  function topusers() {
    const items = [
    {
      id: 1,
      name: 'benadelson29',
      percent: '0 %',
    },
    {
      id: 2,
      name: 'servis38',
      percent: '0 %'
    },
    {
      id: 3,
      name: 'BJohnstone9291',
      percent: '0 %'
    },
    {
      id: 4,
      name: 'JohnstoneB',
      percent: '0 %'
    },
    {
      id: 5,
      name: 'trieuj77',
      percent: '0 %'
    },
    {
      id: 6,
      name: 'malonem6',
      percent: '0 %'
    }]


    const itemRows = [];
    for (let item of items) {
      const row = (
        <tr key={item.id}>
          <td key={1}>{item.id}</td>
          <td key={2}>{item.name}</td>
          <td key={3}>{item.percent}</td>
        </tr>
      );
      itemRows.push(row);
    }
    return (
      <table className = "home2" align="center">
        <thead>
          <tr>
            <th colSpan = '3'>Top users</th>
          </tr>
          <tr>
            <th>#</th>
            <th>Username</th>
            <th>Return #%</th>
          </tr>
        </thead>
        <tbody>
          {itemRows}
        </tbody>
      </table>
    );
  }


  class SubInfo extends React.Component {
    render() {
      return (
        <h3>
          <div id="homeContainer">
            <div id="Top10StockTable">
              {portfolio()}
            </div>
            <div id="TopUsersTable">
              {topusers()}
            </div>
            <div id="clear"></div>
        </div>
        </h3>);
    }
  }

  ReactDOM.render(<SubLinks />, document.getElementById('root'))
  ReactDOM.render(<SubInfo />, document.getElementById('subInfo'))
</script>

<footer>
  <p></p>
</footer>

</body>
</html>